name: Notion2Github
on:
  schedule:
    - cron: "0 14 * * *"
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
      - uses: actions/checkout@v2

      - name: Notion2Github
        uses: younho9/notion2github@v0.0.3-beta
        with:
          database-url: https://www.notion.so/acc3dfd0339e4cacb5baae8673fddfad?v=83b3d2a66f634940987d1142e51da175

          # export config
          docs-directory: ./docs
          recursive-export: True
          create-page-directory: False
          add-metadata: True
          lower-pathname: True
          lower-filename: True
          line-break: False

          # database config
          category-column-name: Category
          tags-column-name: Tags
          created-time-column-name: Created Time
          status-column-name: Status
          current-status: âœ… Completed
          next-status: ðŸ–¨ Published
        env:
          NOTION_TOKEN: ${{ secrets.NOTION_TOKEN }}

      - name: Format documents
        uses: creyD/prettier_action@v3.1
        with:
          prettier_options: --write ./docs/**/*.md
          commit_message: "docs: Update docs (auto)"
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
